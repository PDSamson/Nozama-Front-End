<!DOCTYPE html>
<html>
    <head>
      <title>Example</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <!-- Do not add `link` tags-->
      <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

      <!-- Do not add `script` tags-->
      <script src="public/vendor.js" type="text/javascript" charset="utf-8" defer></script>
      <script src="public/application.js" type="text/javascript" charset="utf-8" defer></script>
    </head>
    <body>
<!-- ********************************************************************* -->

    <!-- ***********sign up/in*************** -->
    <div class="row sign-in-up-wrap">
      <h5 id="sign-message"></h5>
    <div id="sign-in-wrap">
      <!-- sign in form -->
      <form id="sign-in">
        <fieldset>
          <h3 class='heading'>Sign In</h3>
          <input class="form-control form-control-sm" type="text" id="sign-in-email" name="credentials[email]" placeholder="Email">
          <input class="form-control form-control-sm" type="password" id="sign-in-password" name="credentials[password]" placeholder="Password">
          <input class="btn btn-light" id="sign-in-btn" type="submit" name="submit" value="Sign In">
        </fieldset>
      </form>
        <!-- <p>Don't have an account? <button class="bike-btn" id="switch-to-sign-up">Sign up</button></p> -->
    </div>

    <div id="sign-up-wrap">
    <!-- sign up form -->
    <form id="sign-up">
      <fieldset>
        <h3>Sign Up</h3>
        <input class="form-control form-control-sm" type="text" id="sign-up-email" name="credentials[email]" placeholder="Email">
        <input class="form-control form-control-sm" type="password" id="sign-up-password" name="credentials[password]" placeholder="Password">
        <input class="form-control form-control-sm" type="password" id="sign-up-password-confirm" name="credentials[password_confirmation]" placeholder="Password Confirmation">
        <input class="btn btn-light" id="sign-up-btn" type="submit" name="submit" value="Sign Up">
      </fieldset>
    </form>
      <!-- <p>Already have an account? <button class="bike-btn" id="switch-to-sign-in">Sign in</button></p> -->
    </div>
    </div>

    <!-- ********************* main ********************************** -->

    <main class="main">
      <div class="search">
        <h1 class="nozama">Nozama</h1>
        </div>
        <nav class="nav-bar">
          <button class="btn btn-dark" id="show-sign-in">Sign In</button>
          <button class="btn btn-dark" id="show-sign-up">Sign Up</button>
          <button class="btn btn-dark" id="sign-out">Sign Out</button>
          <button class="btn btn-dark" id="show-shopping-cart">Cart</button>
          </nav>
      <!-- sign out button -->
      <div class='products-wrap'>
        <h4 id="main-message">HI!</h4>
        <button class="btn dummy-button-get">Get Products</button>
          </br>
          <div class="show-products-content">
          </div>
      </div>

      <!-- ****************** shopping cart *************************** -->

      <div class="shopping-cart">
        <script src="https://checkout.stripe.com/checkout.js"></script>
        <h4>Your Cart</h4>
        <div class="cart-products">
        </div>
        <button class="btn" id="submit-cart-stripe">Submit Order</button>

        <!-- <script src="http://code.jquery.com/ui/3.2.1/jquery-ui.js"></script> -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>
        const handler = StripeCheckout.configure({
          key: 'pk_test_OTB8FL8IFKn9v24Qi7h64eCz',
          image: 'https://stripe.com/img/documentation/checkout/marketplace.png',
          locale: 'auto',
          token: function(token) {
            console.log('token is ', token)
            const tokenData = {
              token: {
                token_id: token.id
              }
            }

            // You can access the token ID with `token.id`.
            // Get the token ID to your server-side code for use.
            const sendToken = function (data) {
              return $.ajax({
                url: 'https://still-thicket-16022.herokuapp.com/tokens',
                method: 'POST',
                data
              })
            }
            sendToken(tokenData).then(console.log('great success!')).catch(console.error)
          }
        })

        document.getElementById('submit-cart-stripe').addEventListener('click', function(e) {
          // Open Checkout with further options:
          handler.open({
            name: 'Demo Site',
            description: '2 widgets',
            amount: 2000
          })
          e.preventDefault()
        })

        // Close Checkout on page navigation:
        window.addEventListener('popstate', function() {
          handler.close()
        })
        </script>

        <button class="btn" id="exit-cart">Exit Cart</button>
      </div>

    </main>
    </body>
</html>
